<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Student Portal</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>

body{
font-family:Arial;
background:#f2f2f2;
margin:0;
}

/* BOX */
.box{
background:white;
max-width:400px;
margin:30px auto;
padding:20px;
border-radius:10px;
box-shadow:0 0 5px gray;
}

/* DASHBOARD */
#dash{
display:none;
padding:20px;
}

/* MENU */
.menu{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
gap:10px;
}

.menu button{
padding:12px;
background:#1e3799;
color:white;
border:none;
border-radius:5px;
cursor:pointer;
}

input,button{
width:100%;
padding:10px;
margin:5px 0;
}

h3{text-align:center;}

</style>
</head>

<body>

<!-- LOGIN -->
<div id="login" class="box">

<h3>Student Login</h3>

<input id="reg" placeholder="Reg Number">
<input id="pass" type="password" placeholder="Password">

<button onclick="login()">Login</button>
<button onclick="register()">Register</button>

<p id="msg"></p>

</div>


<!-- PROFILE -->
<div id="profile" class="box" style="display:none">

<h3>Complete Profile</h3>

<input id="name" placeholder="Full Name">
<input id="course" placeholder="Course">
<input id="level" placeholder="Level">
<input id="semester" placeholder="Semester">

<button onclick="saveProfile()">Save</button>

<p id="pmsg"></p>

</div>


<!-- DASHBOARD -->
<div id="dash">

<h3 style="text-align:center">Student Dashboard</h3>

<div class="menu">

<button onclick="alert('Modules - Next Step')">Modules</button>

<button onclick="alert('Assignments - Next Step')">Assignments</button>

<button onclick="alert('Results - Next Step')">Results</button>

<button onclick="alert('Fees - Next Step')">Fees</button>

<button onclick="alert('Counselling - Next Step')">Counselling</button>

<button onclick="alert('Transfer - Next Step')">Transfer</button>

<button onclick="logout()">Logout</button>

</div>

</div>


<script>

// FIREBASE CONFIG
const firebaseConfig = {
 apiKey: "YOUR_API_KEY",
 authDomain: "YOUR_PROJECT.firebaseapp.com",
 databaseURL: "https://YOUR_PROJECT.firebaseio.com",
 projectId: "YOUR_PROJECT",
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();


// REGISTER
function register(){

let r = reg.value;
let p = pass.value;

if(!r||!p) return alert("Fill all");

let email = r+"@student.com";

auth.createUserWithEmailAndPassword(email,p)
.then(()=>msg.innerText="Registered ✅")
.catch(e=>alert(e.message));
}


// LOGIN
function login(){

let email = reg.value+"@student.com";
let p = pass.value;

auth.signInWithEmailAndPassword(email,p)
.then(user=>{

localStorage.setItem("reg",reg.value);

checkProfile();

})
.catch(()=>alert("Wrong login"));
}


// CHECK PROFILE
function checkProfile(){

let r = localStorage.getItem("reg");

db.ref("students/"+r).once("value")
.then(snap=>{

if(snap.exists()){

login.style.display="none";
profile.style.display="none";
dash.style.display="block";

}else{

login.style.display="none";
profile.style.display="block";

}

});
}


// SAVE PROFILE
function saveProfile(){

let r = localStorage.getItem("reg");

let data={
name:name.value,
course:course.value,
level:level.value,
semester:semester.value
};

db.ref("students/"+r).set(data)
.then(()=>{

pmsg.innerText="Saved ✅";

profile.style.display="none";
dash.style.display="block";

});

}


// LOGOUT
function logout(){

auth.signOut();

localStorage.clear();

location.reload();

}

</script>

</body>
</html>
