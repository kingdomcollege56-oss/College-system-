<!DOCTYPE html>
<html>
<head>
<title>College Portal Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
font-family:Arial;
background:#f2f2f2;
text-align:center;
padding:50px;
}

.box{
background:white;
max-width:350px;
margin:auto;
padding:20px;
border-radius:10px;
box-shadow:0 0 5px gray;
}

input,button{
width:100%;
padding:10px;
margin:8px 0;
}

button{
background:#1e3799;
color:white;
border:none;
border-radius:5px;
cursor:pointer;
}
</style>
</head>

<body>

<div class="box">

<h2>College Portal</h2>

<input type="text" id="reg" placeholder="Registration Number">
<input type="password" id="password" placeholder="Password">

<button onclick="login()">Login</button>
<button onclick="register()">Register</button>

</div>

<script type="module">

import { auth } from "./firebase.js";

import {
signInWithEmailAndPassword,
createUserWithEmailAndPassword
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";


// Convert Reg to Email
function makeEmail(reg){
return reg + "@kcs.com";
}


// LOGIN
function login(){

let reg = document.getElementById("reg").value;
let pass = document.getElementById("password").value;

if(reg=="" || pass==""){
alert("Fill all fields");
return;
}

let email = makeEmail(reg);

signInWithEmailAndPassword(auth,email,pass)
.then(()=>{

localStorage.setItem("student",reg);

window.location="student.html";

})
.catch(()=>alert("Wrong Login"));

}


// REGISTER
function register(){

let reg = document.getElementById("reg").value;
let pass = document.getElementById("password").value;

if(reg=="" || pass==""){
alert("Fill all fields");
return;
}

let email = makeEmail(reg);

createUserWithEmailAndPassword(auth,email,pass)
.then(()=>alert("Registered Successfully âœ…"))
.catch(e=>alert(e.message));

}


window.login = login;
window.register = register;

</script>

</body>
</html>
