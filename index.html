<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kingdom College Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>

body{
margin:0;
font-family:Arial;
background:#eef3f9;
}

/* HEADER */
header{
background:#0a3d62;
color:white;
padding:25px;
text-align:center;
}

/* HERO */
.hero{
background:#cce5ff;
padding:40px;
text-align:center;
}

/* BUTTONS */
.portal-box{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
gap:15px;
margin-top:30px;
}

.portal-box button{
background:#1e3799;
color:white;
padding:16px;
border:none;
border-radius:8px;
font-weight:bold;
cursor:pointer;
font-size:16px;
}

.portal-box button:hover{
background:#4a69bd;
}

/* MODAL */
.modal{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
}

.modal-box{
background:white;
max-width:350px;
margin:120px auto;
padding:25px;
border-radius:10px;
text-align:center;
}

.modal-box input{
width:100%;
padding:10px;
margin:8px 0;
}

.modal-box button{
width:100%;
padding:12px;
background:#1e3799;
color:white;
border:none;
cursor:pointer;
font-weight:bold;
}

.close{
float:right;
color:red;
cursor:pointer;
font-weight:bold;
}

#error{
color:red;
font-size:14px;
}

/* FOOTER */
footer{
background:#0a3d62;
color:white;
text-align:center;
padding:15px;
margin-top:40px;
}

</style>
</head>

<body>

<!-- HEADER -->
<header>
<h1>Kingdom College Portal</h1>
<p>Login System</p>
</header>


<!-- HOME -->
<div class="hero">

<h2>Select Your Panel</h2>

<div class="portal-box">

<button type="button" onclick="openLogin('student')">ðŸŽ“ Student</button>
<button type="button" onclick="openLogin('lecturer')">ðŸ“˜ Lecturer</button>
<button type="button" onclick="openLogin('bursar')">ðŸ’° Bursar</button>
<button type="button" onclick="openLogin('counsellor')">ðŸ§  Counsellor</button>
<button type="button" onclick="openLogin('registrar')">ðŸ“‚ Registrar</button>
<button type="button" onclick="openLogin('rector')">ðŸ‘‘ Rector</button>

</div>

</div>


<!-- LOGIN POPUP -->
<div class="modal" id="loginModal">

<div class="modal-box">

<span class="close" onclick="closeLogin()">X</span>

<h3 id="loginTitle">Login</h3>

<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">

<button onclick="login()">Login</button>

<p id="error"></p>

</div>
</div>


<!-- FOOTER -->
<footer>
<p>Â© 2026 Kingdom College</p>
<p>By Carina ðŸ’™</p>
</footer>


<script>

/* FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyAcL_PjNww-ea6d33irNgWbn1EsBq4acTA",
  authDomain: "collegeportal-app.firebaseapp.com",
  databaseURL: "https://collegeportal-app-default-rtdb.firebaseio.com",
  projectId: "collegeportal-app",
  storageBucket: "collegeportal-app.firebasestorage.app",
  messagingSenderId: "266762331631",
  appId: "1:266762331631:web:66ddfbde53d33086ac421a"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();

let selectedRole="";


/* OPEN LOGIN */
function openLogin(role){

selectedRole = role;

document.getElementById("loginModal").style.display="block";

document.getElementById("loginTitle").innerText =
role.toUpperCase()+" LOGIN";

document.getElementById("error").innerText="";

}


/* CLOSE LOGIN */
function closeLogin(){

document.getElementById("loginModal").style.display="none";

}


/* LOGIN */
function login(){

const email = document.getElementById("email").value;
const pass = document.getElementById("password").value;
const error = document.getElementById("error");

error.innerText="";

if(email=="" || pass==""){
error.innerText="Fill all fields";
return;
}

auth.signInWithEmailAndPassword(email,pass)

.then(user=>{

const uid = user.user.uid;

/* CHECK ROLE */
db.ref("users/"+uid+"/role").once("value")

.then(snap=>{

if(!snap.exists()){
error.innerText="Account has no role!";
auth.signOut();
return;
}

const role = snap.val();

/* VERIFY */
if(role !== selectedRole){

error.innerText="Wrong panel!";
auth.signOut();
return;
}

/* SUCCESS */
alert("Login Successful: "+role);

/* LATER: DASHBOARD */
 // window.location = role+"-dashboard.html";

});

})

.catch(err=>{
error.innerText=err.message;
});

}

</script>

</body>
</html>
