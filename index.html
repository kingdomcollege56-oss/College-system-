<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kingdom College Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>

/* GENERAL */
body{
margin:0;
font-family:Arial;
background:#eef3f9;
}

/* HEADER */
header{
background:#0a3d62;
color:white;
padding:25px;
text-align:center;
}

/* NAV */
nav{
background:#1e3799;
display:flex;
justify-content:center;
flex-wrap:wrap;
}

nav a{
color:white;
padding:12px 18px;
text-decoration:none;
font-weight:bold;
}

nav a:hover{
background:#4a69bd;
}

/* HERO */
.hero{
background:#cce5ff;
padding:40px;
text-align:center;
}

/* BUTTONS */
.portal-box{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
gap:15px;
margin-top:25px;
}

.portal-box button{
background:#1e3799;
color:white;
padding:16px;
border:none;
border-radius:8px;
font-weight:bold;
cursor:pointer;
font-size:16px;
}

.portal-box button:hover{
background:#4a69bd;
}

/* LOGIN MODAL */
.modal{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
}

.modal-box{
background:white;
max-width:350px;
margin:120px auto;
padding:25px;
border-radius:10px;
text-align:center;
}

.modal-box input{
width:100%;
padding:10px;
margin:8px 0;
}

.modal-box button{
width:100%;
padding:12px;
background:#1e3799;
color:white;
border:none;
cursor:pointer;
font-weight:bold;
}

.modal-box button:hover{
background:#4a69bd;
}

.close{
float:right;
cursor:pointer;
color:red;
font-weight:bold;
}

#error{
color:red;
font-size:14px;
}

/* FOOTER */
footer{
background:#0a3d62;
color:white;
text-align:center;
padding:15px;
margin-top:30px;
}

</style>
</head>

<body>

<!-- HEADER -->
<header>
<h1>Kingdom College Management System</h1>
<p>Mbeya - Kyela | Health & Allied Sciences</p>
</header>

<!-- NAV -->
<nav>
<a href="#">Home</a>
<a href="#">About</a>
<a href="#">Courses</a>
<a href="#">Contact</a>
</nav>

<!-- HOME -->
<div class="hero">

<h2>Welcome to Portal</h2>
<p>Select Your Login Panel</p>

<div class="portal-box">

<button onclick="openLogin('student')">ðŸŽ“ Student</button>
<button onclick="openLogin('lecturer')">ðŸ“˜ Lecturer</button>
<button onclick="openLogin('bursar')">ðŸ’° Bursar</button>
<button onclick="openLogin('counsellor')">ðŸ§  Counsellor</button>
<button onclick="openLogin('registrar')">ðŸ“‚ Registrar</button>
<button onclick="openLogin('rector')">ðŸ‘‘ Rector</button>

</div>

</div>


<!-- LOGIN POPUP -->
<div class="modal" id="loginModal">

<div class="modal-box">

<span class="close" onclick="closeLogin()">X</span>

<h3 id="loginTitle">Login</h3>

<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">

<button onclick="login()">Login</button>

<p id="error"></p>

</div>
</div>


<!-- FOOTER -->
<footer>
<p>Â© 2026 Kingdom College</p>
<p>Developed by Carina ðŸ’™</p>
</footer>


<script>
/* FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyAcL_PjNww-ea6d33irNgWbn1EsBq4acTA",
  authDomain: "collegeportal-app.firebaseapp.com",
  databaseURL: "https://collegeportal-app-default-rtdb.firebaseio.com",
  projectId: "collegeportal-app",
  storageBucket: "collegeportal-app.firebasestorage.app",
  messagingSenderId: "266762331631",
  appId: "1:266762331631:web:66ddfbde53d33086ac421a"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();

let selectedRole="";

/* OPEN LOGIN */
function openLogin(role){

selectedRole = role;

document.getElementById("loginModal").style.display="block";

document.getElementById("loginTitle").innerText =
role.toUpperCase()+" LOGIN";

document.getElementById("error").innerText="";

}

/* CLOSE LOGIN */
function closeLogin(){
document.getElementById("loginModal").style.display="none";
}

/* LOGIN FUNCTION */
function login(){

const email = document.getElementById("email").value;
const pass = document.getElementById("password").value;
const error = document.getElementById("error");

error.innerText="";

if(!email || !pass){
error.innerText="Fill all fields";
return;
}

auth.signInWithEmailAndPassword(email,pass)
.then(user=>{

const uid = user.user.uid;

/* CHECK ROLE */
db.ref("users/"+uid+"/role").once("value")
.then(snap=>{

if(!snap.exists()){
error.innerText="No role assigned!";
auth.signOut();
return;
}

const role = snap.val();

/* VERIFY ROLE */
if(role !== selectedRole){
error.innerText="Wrong panel for your account!";
auth.signOut();
return;
}

/* SUCCESS */
alert("Login successful as "+role);

/* LATER: redirect to dashboard */
 // window.location="student-dashboard.html";

});

})
.catch(err=>{
error.innerText=err.message;
});

}

</script>

</body>
</html>
