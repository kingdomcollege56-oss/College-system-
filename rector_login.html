<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rector Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
font-family:Arial;
background:#eef3f9;
}

.box{
width:320px;
margin:120px auto;
background:white;
padding:25px;
border-radius:10px;
text-align:center;
box-shadow:0 0 10px #ccc;
}

input{
width:90%;
padding:10px;
margin:10px 0;
border:1px solid #ccc;
border-radius:5px;
}

button{
padding:10px 25px;
background:#1e3799;
color:white;
border:none;
border-radius:5px;
cursor:pointer;
}

button:hover{
background:#4a69bd;
}

#error{
color:red;
font-size:14px;
}
</style>
</head>

<body>

<div class="box">
<h2>Rector Login</h2>

<input type="text" id="username" placeholder="Username">
<input type="password" id="password" placeholder="Password">

<button onclick="login()">Login</button>

<p id="error"></p>
</div>

<script>
// Firebase Config
const firebaseConfig = {
apiKey:"AIzaSyAcL_PjNww-ea6d33irNgWbn1EsBq4acTA",
authDomain:"collegeportal-app.firebaseapp.com",
databaseURL:"https://collegeportal-app-default-rtdb.firebaseio.com",
projectId:"collegeportal-app",
storageBucket:"collegeportal-app.firebasestorage.app",
messagingSenderId:"266762331631",
appId:"1:266762331631:web:66ddfbde53d33086ac421a"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Login Function
function login(){

const user = document.getElementById("username").value;
const pass = document.getElementById("password").value;
const error = document.getElementById("error");

error.innerText="";

db.ref("users").once("value").then(snapshot=>{

let found = false;

snapshot.forEach(child=>{

let data = child.val();

if(
data.username === user &&
data.password === pass &&
data.role === "admin"
){

// Save Session
localStorage.setItem("rectorID", child.key);
localStorage.setItem("rectorName", data.name);

found = true;
window.location = "rector.html";
}

});

if(!found){
error.innerText="Wrong username or password!";
}

});

}
</script>

</body>
</html>
