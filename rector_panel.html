<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rector Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{font-family:Arial;background:#eef3f9;margin:0;}
header{background:#0a3d62;color:white;padding:20px;text-align:center;}
nav{background:#1e3799;padding:10px;text-align:right;}
nav button{background:red;color:white;border:none;padding:7px 15px;border-radius:5px;cursor:pointer;}
section{margin:20px;background:white;padding:20px;border-radius:10px;box-shadow:0 0 5px #ccc;}
.card{background:#f1f5ff;padding:15px;margin:10px 0;border-left:5px solid #1e3799;}
</style>
</head>
<body>

<header>
<h1>Rector Dashboard</h1>
<p id="welcome"></p>
</header>

<nav>
<button onclick="logout()">Logout</button>
</nav>

<section>
<h2>Dashboard</h2>
<div class="card">ðŸ‘¥ Manage Users</div>
<div class="card">ðŸ“¢ Announcements</div>
<div class="card">ðŸ–¼ Gallery Upload</div>
<div class="card">ðŸ“© Secret Messages</div>
<div class="card">ðŸ“š College Info</div>
</section>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAcL_PjNww-ea6d33irNgWbn1EsBq4acTA",
  authDomain: "collegeportal-app.firebaseapp.com",
  databaseURL: "https://collegeportal-app-default-rtdb.firebaseio.com",
  projectId: "collegeportal-app",
  storageBucket: "collegeportal-app.firebasestorage.app",
  messagingSenderId: "266762331631",
  appId: "1:266762331631:web:66ddfbde53d33086ac421a",
  measurementId: "G-WK2RH31TC2"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

// Page protection
auth.onAuthStateChanged(user=>{
  if(!user){ window.location="rector-login.html"; return; }
  db.ref("users/"+user.uid).once("value").then(snap=>{
    if(!snap.exists() || snap.val().role!=="rector"){
      alert("Unauthorized!");
      auth.signOut();
      window.location="rector-login.html";
    }else{
      document.getElementById("welcome").innerText="Welcome, "+(snap.val().name || "Rector");
    }
  });
});

// Logout
function logout(){
  auth.signOut().then(()=>{ window.location="rector-login.html"; });
}
</script>
</body>
</html>
